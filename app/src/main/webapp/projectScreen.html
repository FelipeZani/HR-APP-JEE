<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Projects</title>
    <link rel="stylesheet" href="css/projectScreen.css" />
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
        integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz" crossorigin="anonymous">
    </script>
    <script type="module" src="./ts/dist/projectScreen/projectScreen.js" defer></script>
    <script type="module" src="./ts/dist/projectScreen/newProject.js" defer></script>
    <script type="module" src="./ts/dist/projectScreen/modifyProject.js" defer></script>
    <script type="module" src="./ts/dist/projectScreen/removeProject.js" defer></script>
    <script type="module" src="./ts/dist/projectScreen/viewMembers.js" defer></script>
</head>
<body>
    <main>
        <h1>Projects</h1>

        <div id="tools-wrapper">
            <button id="newproject-opendialogbutton">New Project</button>
        </div>

        <!-- New Project Dialog -->
        <dialog class="styled-dialog" id="newproject-dialog">
            <form class="form-dialog" id="newproject-form">
                <input type="hidden" name="action" value="addproject">
                <label>Label:
                    <input type="text" name="label" required>
                </label>
                <label>Status:
                    <select name="status" required>
                        <option value="">-- Select Status --</option>
                        <option value="ON GOING">ON GOING</option>
                        <option value="ACCOMPLISHED">ACCOMPLISHED</option>
                        <option value="CANCELLED">CANCELLED</option>
                    </select>
                </label>
                <label>Deadline:
                    <input type="date" name="deadLine">
                </label>
                <label>Manager:
                    <select name="managerId" id="create-proj-manager" 
                            hx-get="/app/projectServlet?action=getemployeesforselect" 
                            hx-trigger="load" hx-swap="innerHTML">
                        <!-- options loaded here -->
                    </select>
                </label>
                <div id="dialog-form-buttonWrapper">
                    <input type="button" value="submit" id="newproject-form-submitBtn">
                    <input type="button" value="close" class="dialog-form-closeButton" id="newproject-closeButton">
                </div>
            </form>
        </dialog>

        <!-- Newly Created Project Dialog -->
        <dialog class="styled-dialog" id="newlycreatdproject-dialog">
            <form class="form-dialog" id="newlycreatdproject-form">
                <label>Project was successfully created!</label>
                <div id="dialog-form-buttonWrapper">
                    <input type="button" value="close" class="dialog-form-closeButton" id="newlycreatdproject-closeButton">
                </div>
            </form>
        </dialog>

        <!-- Modify Project Dialog -->
        <dialog class="styled-dialog" id="modifyproject-dialog">
            <form class="form-dialog" id="modifyproject-form">
                <input type="hidden" name="action" value="modifyproject">
                <input type="hidden" name="projectId" id="modifyproject-id">
                <label>Label:
                    <input type="text" name="label" id="modifyproject-label" required>
                </label>
                <label>Status:
                    <select name="status" id="modifyproject-status" required>
                        <option value="">-- Select Status --</option>
                        <option value="ON GOING">ON GOING</option>
                        <option value="ACCOMPLISHED">ACCOMPLISHED</option>
                        <option value="CANCELLED">CANCELLED</option>
                    </select>
                </label>
                <label>Deadline:
                    <input type="date" name="deadLine" id="modifyproject-deadline">
                </label>
                <label>Manager:
                    <select name="managerId" id="modifyproject-manager" 
                            hx-get="/app/projectServlet?action=getemployeesforselect" 
                            hx-trigger="load" hx-swap="innerHTML">
                        <!-- options loaded here -->
                    </select>
                </label>
                <div id="dialog-form-buttonWrapper">
                    <input type="button" value="submit" id="modifyproject-form-submitBtn">
                    <input type="button" value="close" class="dialog-form-closeButton" id="modifyproject-closeButton">
                </div>
            </form>
        </dialog>

        <!-- View Project Members Dialog -->
        <dialog class="styled-dialog" id="members-dialog">
            <div id="members-dialog-content">
                <!-- Members will be loaded here -->
            </div>
            <div id="dialog-form-buttonWrapper" style="margin-top: 15px;">
                <input type="button" value="close" class="dialog-form-closeButton" id="members-closeButton">
            </div>
        </dialog>

        <!-- Remove Project Dialog -->
        <dialog class="styled-dialog" id="removeproject-dialog">
            <form class="form-dialog" id="removeproject-form">
                <p>Are you sure you want to delete this Project?</p>
                <div id="dialog-form-buttonWrapper">
                    <input type="button" value="Yes" id="removeproject-submitButton">
                    <input type="button" value="No" class="dialog-form-closeButton" id="removeproject-closeButton">
                </div>
            </form>
        </dialog>

        <!-- Projects List Section -->
        <section>
            <h2>Existing Projects</h2>
            <div id="project-list" hx-get="/app/projectServlet?action=getprojectlist" hx-trigger="load, RefreshProjectList from:body" hx-swap="innerHTML">
                <!-- project rows will be loaded here -->
            </div>
        </section>

    </main>
</body>
</html>
